"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[113],{38493:function(e,t,n){n.d(t,{B:function(){return u}});var o=n(28744),r=n(31076),i=n(22839),a=(n(29901),n(53897)),s=n(19405),c=n(61250);const l=["variant","speed","forwardRef"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function u(e){let{variant:t="gradient",speed:n=1,forwardRef:i}=e,a=(0,r.Z)(e,l);return(0,c.jsx)(y,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({variant:t,speed:n,ref:i},a))}const m=(0,a.keyframes)(["0%{transform:translateX(-100%);}100%{transform:translateX(100%);}"]),p=(0,s.ae)(50),f=`linear-gradient(\n  90deg,\n    ${p} 10%,\n    ${(0,s.ae)(10)} 50%,\n    ${p} 90%\n)`,g=(0,s.se)(800),h=`linear-gradient(\n  90deg,\n  ${g} 10%,\n  ${(0,s.se)(750)} 50%,\n  ${g} 90%\n)`,y=a.default.div.withConfig({componentId:"gzndmi-0"})(["&::before{content:'';position:absolute;width:151%;height:100%;background:",";","}position:relative;width:100%;height:100%;border-radius:",";overflow:hidden;background:",";"],(e=>{let{theme:t,variant:n}=e;return"gradient"===n?"light"===t.name?f:h:"light"===t.name?p:g}),(e=>{let{variant:t,speed:n}=e;const o=Math.floor(2e3*n)+"ms";return"gradient"===t&&(0,a.css)(["animation:"," "," cubic-bezier(0.05,0.13,0.67,0.38) infinite;"],m,o)}),(0,i.rem)(8),(e=>{let{theme:t}=e;return"light"===t.name?p:g}))},31663:function(e,t,n){n.d(t,{l:function(){return Pe}});var o=n(28744),r=n(29901),i=n(53897),a=n(39885),s=n(34547),c=n(96777),l=n(68046),d=n(37120),u=n(22839),m=n(19405);const p="0 1px 3px 1px rgba(0, 0, 0, 0.32)",f=`${p}, 0 0 0 10px rgba(255, 255, 255, 0.25)`,g=i.default.span.withConfig({componentId:"sc-14gn5wu-0"})(["align-items:center;background:white;border-radius:50%;box-shadow:",";display:flex;height:",";justify-content:center;position:relative;width:",";transition:box-shadow 0.2s ease-out;&:after{background:",";border-radius:50%;display:block;content:'';height:100%;left:0;position:absolute;width:100%;top:0;transition:transform 0.2s ease-out;transform:scale(0);}"],p,(0,u.rem)(18),(0,u.rem)(18),(e=>e.color)),h=i.default.button.withConfig({componentId:"sc-14gn5wu-1"})(["background:none;color:",";height:",";left:-",";padding:",";position:absolute;outline:none;border:none;top:-",";width:",";"," "," "," &.is--highlighted{transform:scale(1.25);}"],(0,m.iN)(500),(0,u.rem)(38),(0,u.rem)(19),(0,u.rem)(10),(0,u.rem)(19),(0,u.rem)(38),(e=>{let{isActive:t,isDisabled:n}=e;return n?t?"cursor: default;":"cursor: pointer;":"\n        &:active { \n            cursor: grabbing; \n        }\n        cursor: grab;\n    "}),(e=>{let{isActive:t}=e;return t?`\n        ${g} {\n            box-shadow: 0 0 0 2px white, 0 2px 10px 3px rgba(0, 0, 0, 0.18);\n\n            &:after {\n                transform: scale(1);\n            }\n        }\n    `:`\n        &.is--highlighted,\n        &:hover {\n            ${g} {\n                box-shadow: ${f};\n            }\n        }\n    `}),(e=>{let{isDragging:t}=e;return t&&"\n        &:after {\n            content: ''\n            transform: scale(1.1);\n        }\n    "}));var y=n(47298),w=n(61250);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const C=e=>{let{onDrag:t,onStart:n,onStop:o,boardRef:i,children:a,bounds:s,position:{x:c,y:l},disabled:d}=e;const{0:u,1:m}=(0,r.useState)(c),{0:p,1:f}=(0,r.useState)(l);(0,r.useEffect)((()=>{m(c),f(l)}),[c,l]);const g=(0,y.c0)((e=>{let{event:r,xy:[a,c],first:l,last:g}=e,h=0,y=0;const w=window.innerWidth>768?60:0;i.current&&(h=i.current.getBoundingClientRect().top,y=i.current.getBoundingClientRect().left);if(!d&&r){const e=c<s.top+h,i=c>s.bottom+h-w,d=a<s.left+y,b=a>s.right+y,v={top:e,bottom:i,left:d,right:b};!g||"mouseup"!==r.type&&"touchend"!==r.type?Object.values(v).filter((e=>!0===e)).length>1?(!0===v.top&&f(s.top),!0===v.bottom&&f(s.bottom-w),!0===v.left&&m(s.left),!0===v.right&&m(s.right)):d?(m(s.left),f(c-h)):b?(m(s.right),f(c-h)):e?(m(a-y),f(s.top)):i?(m(a-y),f(s.bottom-w)):!l||"mousedown"!==r.type&&"touchstart"!==r.type?(m(a-y),f(c-h)):(n&&n({x:u,y:p}),t(r,{x:u,y:p})):(t(r,{x:u,y:p}),o(r,{x:u,y:p}))}}));return(0,w.jsx)(O,v(v({x:u,y:p},g()),{},{children:a}))},O=i.default.div.attrs((e=>{let{x:t,y:n}=e;return{style:{top:(0,u.rem)(n),left:(0,u.rem)(t)}}})).withConfig({componentId:"sc-156honp-0"})(["position:absolute;touch-action:none;"]),j=e=>{let{buttonRef:t,children:n,id:o,onClick:a,onMouseEnter:s,onMouseLeave:c,isActive:l,isDisabled:d=!1,isDragging:u=!1,disabled:m,bounds:p,onDrag:f,onStart:y,onStop:b,position:v,boardRef:O}=e;const j=(0,r.useContext)(i.ThemeContext);return(0,w.jsx)(C,{boardRef:O,bounds:p,disabled:m,onDrag:f,onStart:y,onStop:b,position:v,children:(0,w.jsx)(h,{onClick:a,onMouseEnter:s,onMouseLeave:c,id:o,isActive:l,isDisabled:d,isDragging:u,ref:t,type:"button",children:(0,w.jsx)(g,{color:j.formats.primary,children:n})})})};var x=n(31076),S=n(42690),E=n(80744);const _=["isActive","isCompleted"];function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}const D=i.default.div.withConfig({componentId:"sc-11dwao5-0"})(["font-size:",";line-height:1.2;color:#4e5a5e;top:0;left:0;transform-origin:top left;pointer-events:all;position:absolute;width:100%;height:100%;z-index:",";"],(0,u.rem)(14),(e=>{let{hasForm:t}=e;return t?E.EA:"8"})),I=i.default.div.withConfig({componentId:"sc-11dwao5-1"})(["display:flex;align-items:center;justify-content:center;pointer-events:none;position:absolute;top:0px;left:0px;width:100%;height:100%;"]),T=i.default.div.withConfig({componentId:"sc-11dwao5-2"})(["font-size:14px;background-color:rgba(0,0,0,0.5);border-radius:3px;padding:12px 16px;margin-top:",";@media screen and (max-width:","){margin-top:0;}"],(0,u.rem)(60),(0,u.rem)(768)),k=(0,i.default)((e=>{let{isActive:t,isCompleted:n}=e,r=(0,x.Z)(e,_);return(0,w.jsx)(S.M,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r))})).withConfig({componentId:"sc-11dwao5-3"})(["width:",";height:",";z-index:1;transition:transform 0.2s cubic-bezier(0.16,1.14,0.63,2),opacity 0.2s;"," path{fill:",";}"],(0,u.rem)(18),(0,u.rem)(18),(e=>{let{isCompleted:t}=e;return t?"\n        opacity: 1;\n        transform: scale(1);\n    ":"\n        opacity: 0;\n        transform: scale(0.7);\n    "}),(e=>{let{isActive:t,theme:n}=e;return t?(0,u.readableColor)((0,u.darken)(.3,n.formats.primary)):n.formats.primary})),R=i.default.button.withConfig({componentId:"sc-1mav6wk-0"})(["background:none;border:none;color:transparent;display:block;height:100%;margin:0;outline:none;padding:0;width:100%;cursor:pointer;visibility:",";"],(e=>e.isHidden?"hidden":"visible")),L=i.default.span.attrs((e=>{let{x:t,y:n}=e;return{style:{transform:`translate3d(${t}px, ${n}px, 0)`}}})).withConfig({componentId:"sc-1mav6wk-1"})(["background-color:rgba(0,0,0,0.5);border-radius:",";color:white;display:",";font-size:",";font-family:'Helvetica Neue',Helvetica,Arial !important;text-rendering:optimizeLegibility;-webkit-font-smoothing:auto;left:0;padding:"," ",";position:absolute;top:0;white-space:nowrap;z-index:1;@media screen and (max-width:","){visibility:hidden;}"],(0,u.rem)(3),(e=>{let{isVisible:t}=e;return t?"block":"none"}),(0,u.rem)(14),(0,u.rem)(10),(0,u.rem)(8),(0,u.rem)(768));function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}const M={text:"",position:{x:0,y:0},timecode:0,isShowing:!1},N=(0,r.createContext)({annotationForm:M,setAnnotationForm:()=>new Error("Not implemented")});var U=e=>{let{children:t}=e;const{0:n,1:i}=(0,r.useState)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},M)),a=(0,r.useMemo)((()=>({annotationForm:n,setAnnotationForm:i})),[n,i]);return(0,w.jsx)(N.Provider,{value:a,children:t})},z=n(27944);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const F=e=>{const{isHidden:t,playerContainerRefNode:n}=e,{0:o,1:i}=(0,r.useState)(0),{0:a,1:c}=(0,r.useState)(0),{0:d,1:u}=(0,r.useState)(!1),{setAnnotationForm:m}=(0,r.useContext)(N),{stage:{player:p}}=(0,r.useContext)(l.yC),{beginAnnotation:f,selectComment:g,updateVideoTime:h}=(0,r.useContext)(l.A2),y=n.getBoundingClientRect(),b={top:y.top,left:y.left,height:n.offsetHeight,width:n.offsetWidth},v=e=>{const{left:t,top:n}=b,{clientX:o,clientY:r}=e;i(o-t+30),c(r-n-10)};return(0,w.jsx)(R,{type:"button",onClick:e=>{(e=>{const{clientX:t,clientY:n}=e,{left:o,top:r}=b,i=(0,z.hq)({x:t-o,y:n-r},b);p&&(m((e=>H(H({},e),{},{position:i,timecode:p.currentTime,isShowing:!0}))),h(p,p.currentTime),p.pause()),g(null,null),f(i)})(e),u(!1)},onMouseEnter:e=>{v(e),u(!0)},onMouseMove:v,onMouseLeave:()=>{u(!1)},isHidden:t,children:(0,w.jsx)(L,{x:o,y:a,isVisible:d,children:(0,s.translate)({singular:"Click to add a note",dictionary:{es:{singular:"Haz clic para agregar una nota"},"de-DE":{singular:"Klicken, um eine Bemerkung hinzuzuf\xfcgen"},"fr-FR":{singular:"Cliquez pour ajouter une note"},"ja-JP":{singular:"\u30af\u30ea\u30c3\u30af\u3057\u3066\u30e1\u30e2\u3092\u8ffd\u52a0\u3059\u308b"},"ko-KR":{singular:"\uba54\ubaa8\ub97c \ucd94\uac00\ud558\ub824\uba74 \ud074\ub9ad\ud558\uc138\uc694"},"pt-BR":{singular:"Clique para adicionar uma anota\xe7\xe3o"}}})})})};var q=n(23141),B=n(68667),Z=n(54694),V=n(70867);const G=["maxLineCount","minLineCount"];function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const W=e=>{let{minLineCount:t=1,maxLineCount:n=1}=e;if(t>n)throw new RangeError(`ElasticTextarea minLineCount(${t}) is greater than the maxLineCount(${n})`)};class Y extends r.PureComponent{constructor(e){super(e),(0,o.Z)(this,"storeRef",(0,r.createRef)()),(0,o.Z)(this,"updateHeight",(()=>{if(this.storeRef.current){this.storeRef.current.style.height="auto";const e=((e,t)=>{let{minLineCount:n,maxLineCount:o}=t;const r=window.getComputedStyle(e),i=(r.paddingBottom?parseFloat(r.paddingBottom):0)+(r.paddingTop?parseFloat(r.paddingTop):0),a=r.lineHeight?parseFloat(r.lineHeight):0;let s=e.scrollHeight-i;if(o||n){let e=Math.ceil(s/a);o&&(e=Math.min(o,e)),n&&(e=Math.max(n,e)),s=e*a}return s+i})(this.storeRef.current,this.props);this.storeRef.current.style.height=`${e}px`}})),W(e)}componentDidMount(){this.updateHeight()}componentWillReceiveProps(e){W(e)}componentDidUpdate(){this.updateHeight()}render(){const e=this.props,{maxLineCount:t,minLineCount:n}=e,o=(0,x.Z)(e,G);return(0,w.jsx)("textarea",K(K({},o),{},{ref:this.storeRef}))}}const Q=["textIndent"],X=["disableSave","color"];function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ne=i.default.div.withConfig({componentId:"sc-17n9szi-0"})(["background-color:white;box-shadow:0 10px 12px 2px rgba(0,0,0,0.25);border-radius:",";max-width:100%;min-height:",";overflow:hidden;padding:",";position:absolute;width:",";transition:opacity 0.2s ease-out,transform 0.2s ease-out;"," @media screen and (max-width:","){position:fixed;width:100vw;height:100vh;left:0;right:0;top:0;bottom:0;border-radius:0;","}"],(0,u.rem)(5),(0,u.rem)(125),(0,u.rem)(16),(0,u.rem)(300),(e=>e.isDragging&&"\n        opacity: 0;\n        transform: scale(0.95);\n    "),(0,u.rem)(768),(e=>e.isDragging&&"\n            opacity: 1;\n        ")),oe=i.default.div.withConfig({componentId:"sc-17n9szi-1"})(["display:flex;flex-wrap:wrap;@media screen and (max-width:","){font-size:",";}"],(0,u.rem)(768),(0,u.rem)(18)),re=i.default.div.withConfig({componentId:"sc-17n9szi-2"})(["flex-grow:1;margin-top:",";max-height:",";overflow-y:auto;position:relative;"],(0,u.rem)(5),(0,u.rem)(225)),ie=(0,i.default)(V.q).withConfig({componentId:"sc-17n9szi-3"})(["height:",";margin-right:",";width:",";@media screen and (max-width:","){width:",";height:",";}"],(0,u.rem)(36),(0,u.rem)(10),(0,u.rem)(36),(0,u.rem)(768),(0,u.rem)(40),(0,u.rem)(40)),ae=i.default.div.withConfig({componentId:"sc-17n9szi-4"})(["display:flex;flex-basis:100%;justify-content:flex-end;margin-top:",";@media screen and (max-width:","){display:none;}"],(0,u.rem)(25),(0,u.rem)(768)),se=(0,i.default)((e=>{let{textIndent:t}=e,n=(0,x.Z)(e,Q);return(0,w.jsx)(Y,te({},n))})).withConfig({componentId:"sc-17n9szi-5"})(["appearance:none;border:none;line-height:1.6;outline:none;padding:0;resize:none;width:100%;text-indent:","px;font-family:inherit;font-size:inherit;margin:0em;@media screen and (max-width:","){font-size:",";}"],(e=>e.textIndent),(0,u.rem)(768),(0,u.rem)(18)),ce=i.default.span.withConfig({componentId:"sc-17n9szi-6"})(["color:#3a5161;font-weight:bold;left:0;line-height:1.6;position:absolute;top:0;&:after{content:'-';display:inline-block;font-weight:normal;padding:0 ",";}"],(0,u.rem)(2)),le=i.default.div.withConfig({componentId:"sc-17n9szi-7"})(["display:none;justify-content:space-between;width:100%;margin-bottom:1.375rem;padding:0.5rem 0 1.375rem 0;border-bottom:1px solid #eef1f2;font-size:1.125rem;@media screen and (max-width:","){display:flex;}> svg{position:relative;top:0.1875rem;}"],(0,u.rem)(768)),de=(0,i.default)((e=>{let{disableSave:t,color:n}=e,o=(0,x.Z)(e,X);return(0,w.jsx)(S.M,te({},o))})).withConfig({componentId:"sc-17n9szi-8"})(["width:",";height:",";z-index:1;path{fill:",";}"],(0,u.rem)(18),(0,u.rem)(18),(e=>e.disableSave?"#D0D8DB":e.color)),ue=(0,i.default)(Z.z).withConfig({componentId:"sc-17n9szi-9"})(["line-height:2.1428571429;min-width:0;min-height:0;padding:0 0.75rem;"]),me=(0,i.default)(Z.z).withConfig({componentId:"sc-17n9szi-10"})(["border:0;font-size:inherit;font-weight:normal;line-height:normal;min-height:0;min-width:0;padding:0;&:active{cursor:wait;}"]);var pe=n(41630);function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const he=e=>{let{formRef:t,isDragging:n,onCancel:o}=e;const{0:a,1:c}=(0,r.useState)(0),{annotationForm:u,setAnnotationForm:m}=(0,r.useContext)(N),p=(0,r.useContext)(d.Z),f=p?.user?p.user.pictures.sizes[1].link:"https://i.vimeocdn.com/portrait/defaults-blue_75x75.png",{addCommentState:g,stage:{commentInProgress:h}}=(0,r.useContext)(l.yC),y=g===B.c1.Requesting,b=y||u.text.trim().length<1,v=(0,r.useContext)(i.ThemeContext),{addTimecodedComment:C}=(0,r.useContext)(l.A2);(0,r.useEffect)((()=>{!y&&!h&&u.isShowing&&u.text.length>0&&m(M)}),[y,h]);const O=(0,r.useCallback)((e=>{null!==e&&c(e.offsetWidth)}),[]),j=()=>{if(u.isShowing){const e={text:u.text,timecode:u.timecode,x:u.position.x,y:u.position.y,name:null};C(e)}};return(0,w.jsxs)(ne,{ref:t,isDragging:n,children:[(0,w.jsxs)(le,{children:[(0,w.jsx)(me,{variant:"minimal",onClick:e=>{e.preventDefault(),q.Zz.trackClick({container:"video_review",component:"player",keyword:"comment_cancel"}),m(M),o()},children:(0,s.translate)({singular:"Cancel",dictionary:{es:{singular:"Cancelar"},"de-DE":{singular:"Abbrechen"},"fr-FR":{singular:"Annuler"},"ja-JP":{singular:"\u30ad\u30e3\u30f3\u30bb\u30eb"},"ko-KR":{singular:"\ucde8\uc18c"},"pt-BR":{singular:"Cancelar"}}})}),(0,w.jsx)(de,{color:v.formats.primary,disableSave:b,onClick:()=>{q.Zz.trackClick({container:"video_review",component:"player",keyword:"add_comment_submit"}),b||j()},"aria-label":(0,s.translate)({singular:"Add",dictionary:{es:{singular:"Agregar"},"de-DE":{singular:"Hinzuf\xfcgen"},"fr-FR":{singular:"Ajouter"},"ja-JP":{singular:"\u8ffd\u52a0"},"ko-KR":{singular:"\ucd94\uac00"},"pt-BR":{singular:"Adicionar"}}})})]}),(0,w.jsxs)(oe,{children:[(0,w.jsx)(ie,{size:"sm",src:f}),(0,w.jsxs)(re,{children:[(0,w.jsx)(se,{autoFocus:!0,"aria-label":(0,s.translate)({singular:"Add a note",dictionary:{es:{singular:"Agregar una nota"},"de-DE":{singular:"Eine Anmerkung hinzuf\xfcgen"},"fr-FR":{singular:"Ajouter une note"},"ja-JP":{singular:"\u30e1\u30e2\u3092\u8ffd\u52a0"},"ko-KR":{singular:"\uba54\ubaa8 \ucd94\uac00"},"pt-BR":{singular:"Adicionar uma observa\xe7\xe3o"}}}),textIndent:a,rows:"1",value:u.text,onChange:e=>{if(!y){const{value:t}=e.target;m((e=>ge(ge({},e),{},{text:t})))}},onKeyDown:b?null:e=>(13!==e.keyCode||e.shiftKey||(e.preventDefault(),j()),e)}),(0,w.jsx)(ce,{ref:O,children:(0,pe.kV)(u.timecode)})]}),(0,w.jsx)(ae,{children:(0,w.jsx)(ue,{disabled:b,format:"primary",onClick:e=>{e.preventDefault(),q.Zz.trackClick({container:"video_review",component:"player",keyword:"add_comment_submit"}),j()},children:(0,s.translate)({singular:"Add",dictionary:{es:{singular:"Agregar"},"de-DE":{singular:"Hinzuf\xfcgen"},"fr-FR":{singular:"Ajouter"},"ja-JP":{singular:"\u8ffd\u52a0"},"ko-KR":{singular:"\ucd94\uac00"},"pt-BR":{singular:"Adicionar"}}})})})]})]})};var ye;!function(e){e.TOP="top",e.LEFT="left",e.BOTTOM="bottom",e.RIGHT="right"}(ye||(ye={}));const we=(e,t,n,o)=>{const r=n.bottom-e.bottom,i=n.right-e.right,a=e.top-n.top,s=e.left-n.left;if(o&&(o.side===ye.TOP||o.side===ye.BOTTOM)){const n=s>-1*o.offset,c=i+e.width>o.offset+t.width,l=o.side===ye.TOP?r>t.height:a>t.height;return n&&c&&l}if(o&&(o.side===ye.LEFT||o.side===ye.RIGHT)){const n=a>-1*o.offset,c=r+e.height>o.offset+t.height,l=o.side===ye.LEFT?i>t.width:s>t.width;return n&&c&&l}throw new Error(`Unknown tether side '${o&&o.side}'`)},be={side:ye.LEFT,offset:15};function ve(e,t,n){const o=e.getBoundingClientRect(),r={height:t.offsetHeight,width:t.offsetWidth},i=function(e,t,n){return(arguments.length>3&&void 0!==arguments[3]?arguments[3]:[]).find(we.bind(null,e,t,n))}(o,r,(e=>{let t=e.parentNode;if(!t)throw"Invalid container";do{const e=window.getComputedStyle(t).overflowX;if(("scroll"===e||"auto"===e)&&t.scrollHeight>t.clientHeight)break;if(t=t.parentNode,!t)throw"Invalid container"}while(t!==document.body);let n=t.getBoundingClientRect();if(t===document.body){const e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;n={top:0,left:0,width:e,height:t,right:e,bottom:t}}else{const e=n.width-t.clientWidth,o=n.height-t.clientHeight;n={top:n.top,right:n.right,bottom:n.bottom,left:n.left,width:n.width,height:n.height},n.width-=e,n.height-=o,n.right-=e,n.bottom-=o}return n})(e),((e,t)=>[be,{side:ye.RIGHT,offset:15},{side:ye.TOP,offset:t.width/-2+e.width/2},{side:ye.BOTTOM,offset:t.width/-2+e.width/2}])(o,r));return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,{x:o,y:r}=arguments.length>3?arguments[3]:void 0;switch(o-=t.width/2,r-=t.height/2,e.side){case ye.LEFT:return{top:r-e.offset,left:o+t.width};case ye.RIGHT:return{top:r-e.offset,left:o-n.width};case ye.TOP:return{top:r+t.height,left:o+e.offset};case ye.BOTTOM:return{top:r-n.height,left:o+e.offset};default:return{top:r-e.offset,left:o+t.width}}}(i,o,r,n)}const Ce=e=>{let{bounds:t,position:n,onDrag:o,onDragStart:i,onDragStop:a,boardRef:s}=e,c=null;const d=(0,r.useRef)(null),u=(0,r.useRef)(null),m=(0,r.useRef)(null);let p=!1;const{setAnnotationForm:f}=(0,r.useContext)(N),{cancelAnnotation:g}=(0,r.useContext)(l.A2),{stage:{isDragging:h}}=(0,r.useContext)(l.yC),y=()=>{p=!0},b=e=>{d.current&&!d.current.contains(e.target)&&(f(M),g())},v=e=>{27===e.keyCode&&(f(M),g())},C=()=>{if(!(window.innerWidth<=768)){if(u.current&&m.current){const{left:e,top:t}=ve(u.current,m.current,n);m.current.style.top=`${t}px`,m.current.style.left=`${e}px`}p=!1}};return(0,r.useEffect)((()=>(window.addEventListener("resize",y),c=document.querySelector(".single-video-page-container"),c&&c.addEventListener("click",b),document.addEventListener("keydown",v),C(),()=>{window.removeEventListener("resize",y),c&&c.removeEventListener("click",b),document.removeEventListener("keydown",v)})),[]),(0,r.useEffect)((()=>{!p&&h||C()}),[h]),(0,w.jsxs)("div",{ref:d,children:[(0,w.jsx)(j,{bounds:t,isActive:!0,isDragging:h,position:n,onDrag:o,onStart:i,onStop:a,buttonRef:u,boardRef:s}),(0,w.jsx)(he,{formRef:m,isDragging:h,onCancel:g.bind(null)})]})};function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const xe=e=>{const{playerMeasurements:t,playerContainerRef:n}=e,o=(0,r.useContext)(l.A2),{activeCommentUri:i,comments:a,stage:{player:s,commentInProgress:c}}=(0,r.useContext)(l.yC),u=s?.paused?a?.uris.filter((e=>!!a.byUri[e].timeCode&&a.byUri[e].timeCode===s?.currentTime)):null,m=(0,r.useContext)(d.Z),{annotationForm:p,setAnnotationForm:f}=(0,r.useContext)(N),g=(0,r.useRef)(null),h={bottom:t.height,left:0,right:t.width,top:0},y=(e,n)=>{n=(0,z.hq)(n,t),o.onAnnotationDrag(n)},b=(e,n)=>{n=(0,z.hq)(n,t),f((e=>je(je({},e),{},{position:n}))),o.onAnnotationDragStop(),i&&o.updateAnnotationPosition(i,n)};return(0,r.useEffect)((()=>{if(c&&m){const{text:e,x:t,y:n,timecode:o}=c;f({text:e,position:{x:t,y:n},timecode:o,isShowing:!0})}}),[c,m]),(0,w.jsxs)(D,{ref:g,hasForm:p.isShowing,children:[n.current&&(0,w.jsx)(F,{isHidden:p.isShowing,playerContainerRefNode:n.current}),u&&u.map((e=>{const n=a?.byUri[e];if(!n)return null;const r=e===i,s=!!m?.user?.uri&&m?.user?.uri===n.user?.uri;return(0,w.jsx)(j,{id:`anchor_${n.uri.split("/").pop()}`,onClick:e=>o.selectComment(n.uri,e),onMouseEnter:()=>{(0,z.d$)(n.uri)},onMouseLeave:()=>{(0,z.d$)(n.uri,!1)},isActive:r,isDisabled:!r||!s,disabled:!r||!s,bounds:h,onDrag:y,onStop:b,position:(0,z.kv)(n.coordinates,t),boardRef:g,children:(0,w.jsx)(k,{isActive:r,isCompleted:"open"!==n.status})},n.uri)})),p.isShowing?(0,w.jsx)(Ce,{bounds:h,onDrag:y,onDragStart:o.onAnnotationDragStart,onDragStop:b,position:(0,z.kv)({x:p.position.x,y:p.position.y},t),boardRef:g}):null]})},Se=i.default.div.withConfig({componentId:"sc-1lu5y78-0"})(["font-size:",";font-family:'Helvetica Neue',Helvetica,Arial !important;color:#fff;text-rendering:optimizeLegibility;-webkit-font-smoothing:auto;"," width:100%;position:absolute;display:flex;justify-content:center;align-items:center;top:0;left:0;bottom:",";@media screen and (max-width:","){bottom:0;}"],(0,u.rem)(14),(e=>e.zIndex?`z-index: ${e.zIndex};`:""),(0,u.rem)(60),(0,u.rem)(768));function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Pe=e=>{const{playerContainerRef:t,teamAccentColor:n}=e,{activeCommentUri:o,comments:d,stage:{cuePoints:u,player:m,playerTime:p},video:f}=(0,r.useContext)(l.yC),g=!!p,{0:h,1:y}=(0,r.useState)({width:0,height:0}),{capabilities:b,loading:v}=(0,a.Kl)(["hasSvvTimecodedComments"],f?.user.uri),{selectComment:C}=(0,r.useContext)(l.A2),O=(v||!b.hasSvvTimecodedComments)&&!(0,z.Sk)(f),j=(0,r.useCallback)((()=>{t.current&&y({height:t.current.offsetHeight,width:t.current.offsetWidth})}),[t]),x=(0,r.useCallback)((()=>{document.fullscreenElement||j()}),[t]);(0,r.useEffect)((()=>(window.addEventListener("resize",j),window.addEventListener("fullscreenchange",x),()=>{window.removeEventListener("resize",j),window.removeEventListener("fullscreenchange",x)})),[]),(0,r.useEffect)((()=>{t.current&&(j(),setTimeout((()=>{(0,z.PI)()}),0))}),[t?.current?.offsetHeight,t?.current?.offsetWidth]);const S=(0,r.useCallback)((e=>{let{data:{timecode:t}}=e;if(m&&m.paused&&m.currentTime&&"number"===typeof t&&d&&(m.pause(),t===m.currentTime)){const e=d.uris.filter((e=>d.byUri[e].timeCode===t));if(1!==e.length)return;C(e[0],null)}}),[m,d]);return(0,r.useEffect)((()=>(m&&(m._overrideControlbarBehavior(!0),m.addEventListener("cuepoint",S)),()=>{m&&(m._overrideControlbarBehavior(!1),(0,c.iT)(m),m.removeEventListener("cuepoint",S))})),[m,S]),(0,r.useEffect)((()=>{m&&!O&&(0,c.Jz)(m,u)}),[m,u,O]),(0,r.useEffect)((()=>{if(o){const e=d?.byUri[o];e&&p&&!(0,pe.lz)(e.timeCode,p)&&C(null,null)}}),[p]),O?null:g?(0,w.jsx)(i.ThemeProvider,{theme:e=>n?_e(_e({},e),{},{formats:_e(_e({},e.formats),{},{primary:n})}):e,children:(0,w.jsx)(Se,{children:(0,w.jsx)(U,{children:(0,w.jsx)(xe,{playerMeasurements:h,playerContainerRef:t})})})}):(0,w.jsx)(Se,{zIndex:2,children:(0,w.jsx)(I,{children:(0,w.jsx)(T,{children:(0,s.translate)({singular:"Play video to add notes",dictionary:{es:{singular:"Reproduce el video para agregar anotaciones"},"de-DE":{singular:"Starte einen Video, um Notizen hinzuzuf\xfcgen"},"fr-FR":{singular:"Lire la vid\xe9o pour ajouter des notes"},"ja-JP":{singular:"\u52d5\u753b\u3092\u518d\u751f\u3057\u3066\u30e1\u30e2\u3092\u8ffd\u52a0\u3059\u308b"},"ko-KR":{singular:"\uba54\ubaa8\ub97c \ucd94\uac00\ud558\ub824\uba74 \ub3d9\uc601\uc0c1\uc744 \uc7ac\uc0dd\ud558\uc138\uc694"},"pt-BR":{singular:"Reproduzir v\xeddeo para adicionar anota\xe7\xf5es"}}})})})})}},27944:function(e,t,n){n.d(t,{BJ:function(){return d},Jk:function(){return a},PI:function(){return l},Sk:function(){return c},d$:function(){return u},hq:function(){return r},kG:function(){return s},kv:function(){return i}});var o=n(41630);const r=(e,t)=>{let{x:n,y:o}=e,{height:r,width:i}=t;return{x:Math.min(1,Math.max(0,n/i)),y:Math.min(1,Math.max(0,o/r))}},i=(e,t)=>{let{x:n,y:o}=e,{height:r,width:i}=t;return{x:n*i,y:o*r}},a=(e,t)=>{t&&(t.currentTime=e,t.pause())},s=e=>{let{x:t,y:n}=e;return{x:parseFloat(t.toFixed(3)),y:parseFloat(n.toFixed(3))}},c=e=>e?.showSvvTimecodedComments,l=()=>{if(/(MSIE|Trident|Edge)/.test(navigator.userAgent)){const e=window.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(e)}else window.dispatchEvent(new Event("resize"))},d=(e,t)=>!!t&&(0,o.lz)(t,e),u=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=document.querySelector(`#anchor_${e.split("/").pop()}`);n&&(t?n.classList.add("is--highlighted"):n.classList.remove("is--highlighted"));const o=document.querySelector(`#comment_${e.split("/").pop()}`);o&&(t?o.classList.add("is--highlighted"):o.classList.remove("is--highlighted"))}},41630:function(e,t,n){n.d(t,{DU:function(){return a},kV:function(){return r},rJ:function(){return i},lz:function(){return c}});const o=((e,t,n)=>{"string"!==typeof n&&(n=String(n));return`${Array(t).fill(e).join("")}${n}`.slice(-1*t)}).bind(null,"0",2),r=e=>{if(!e)return"00:00";const t=Math.floor(e/3600),n=o(Math.floor(e%3600/60)),r=o(Math.floor(e%60));return t?`${t}:${n}:${r}`:`${n}:${r}`},i=(e,t)=>Math.round(e*t)/t,a=(e,t)=>Math.round(e/t*100),s=(e,t)=>{const n=+e+t/2;return n-n%+t},c=(e,t)=>s(e,.01)===s(t,.01)},80744:function(e,t,n){n.d(t,{EA:function(){return r},HT:function(){return i},j$:function(){return o}});const o={small:480,medium:769,mediumLarge:1130,large:1280},r=17,i="linear-gradient(270deg, #15C1CA 0%, #22B654 100%)"},10657:function(e,t,n){n.d(t,{ZP:function(){return G}});var o=n(29901),r=n(37120),i=n(69800),a=n.n(i);const s="svv_comment_text",c="svv_timecoded_comment",l="svv_comment_reply",d="svv_guest_comments",u="video_review_loggedout_name",m=()=>{if(null!==window.localStorage){const e=window.localStorage.getItem(d);return e?JSON.parse(e):[]}return[]},p=()=>a().get(u),f=e=>{a().set(u,e)};var g=n(68046),h=n(28744),y=n(22839),w=n(52102),b=n(27944),v=n(41630),C=n(80744),O=n(29062);const j=e=>{const t=(t,n)=>{e({type:O.FZ,payload:n,meta:{paused:t.paused,duration:t.duration,percent:(0,v.DU)(n,t.duration)}})};return{beginAnnotation:t=>{e({type:O.DU,payload:t})},cancelAnnotation:()=>{e({type:O.qi})},clearCommentInProgress:()=>{e({type:O.Sw,payload:null})},initVideo:n=>{const o=document.querySelector(".js-player"),r=e=>t(n,e.seconds);n.addEventListener("timeupdate",r),n.addEventListener("pause",r),n.addEventListener("play",(e=>{e&&e.seconds&&t(n,e.seconds)})),n.addEventListener("ended",r),window.BigScreen&&o&&(window.BigScreen.on("enter",(()=>(t=>{e({type:O.c9,payload:t})})(o))),window.BigScreen.on("exit",(()=>(t=>{e({type:O.Sb,payload:t})})(o)))),e({type:O.JF,payload:{player:n},meta:{duration:n.duration}})},onAnnotationDrag:t=>{e({type:O.Qy,payload:t})},onAnnotationDragStart:()=>{e({type:O.cu})},onAnnotationDragStop:()=>{e({type:O.qq})},resetPlayerTime:()=>{e({type:O.Hu})},setTimecodedCommentInProgress:t=>{e({type:O.Sw,payload:t})},updateVideoTime:t,updateCuePoints:t=>{e({type:O.EM,payload:t})}}};var x=n(31076),S=n(8262);const E=["name"];function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const D={time_code:0,coordinates:{x:0,y:0},app_origin:"svv"},I=async(e,t,n,o)=>{try{const r=await fetch(`//${t.apiUrl}${n}`,{method:"PATCH",headers:{Authorization:`jwt ${t.jwt}`,"Content-Type":"application/json","Vimeo-Page":o,Accept:"application/vnd.vimeo.*+json;version=3.4.1"},body:e}),i=await r.json();if(i.error)throw new Error(i.error);return(0,S.uo)(i)}catch(r){return null}},T=async(e,t,n)=>{try{const o=await fetch(`//${t.apiUrl}${n}`,{method:"POST",headers:P(P({},t?.jwt?{Authorization:`jwt ${t.jwt}`}:{}),{},{"Content-Type":"application/json",Accept:"application/vnd.vimeo.*+json;version=3.4.1"}),body:e}),r=await o.json();if(r.error)throw new Error(r.error);return(0,S.uo)(r)}catch(o){throw new Error(o)}},k=async(e,t,n,o)=>{const r=JSON.stringify(P(P({},D),{},{text:e},o?{name:o}:{}));return await T(r,t,n)},R=async(e,t)=>{try{const n=await fetch(e,{method:"GET",headers:{Authorization:`jwt ${t.jwt}`,"Content-Type":"application/json",Accept:"application/vnd.vimeo.*+json;version=3.4.1"}}),o=await n.json();if(o.error)throw new Error(o.error);return(0,S.uo)(o)}catch(n){return null}};var L=n(98029),A=n(68667),M=n(74076);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const z=(e,t,n,o)=>{const r=(0,w.q)(),i=j(t),a=async(o,r)=>{o&&t({type:A.L9.SetVideo,payload:o});const i=(o??e.video)?.metadata?.connections,a=(0,M._T)(o??e.video);let s=(0,M.yT)(n,i?.notes?.uri,a,r);if(!s||!n)return;t({type:A.L9.FetchCommentsInit,payload:!0});const c=await R(s,n);t({type:A.L9.FetchCommentsComplete,payload:{comments:c}})},d=async(r,i,s)=>{const c=s||e.guestName||p();if(!n||!n.user){if(!c)return _(!0),void t({type:A.L9.SetReplyInProgress,payload:{parentComment:r,text:i}});t({type:A.L9.SetGuestName,payload:c}),f(c),_(!1),(0,L.D5)(o)}const l=`${r.uri}/replies`;if(null!==n&&l){t({type:A.L9.SetAddReplyState,payload:{state:A.c1.Requesting,uri:r.uri}});try{const r=await k(i,n,l,c);(0,L.aF)(r,o,e),a(),t({type:A.L9.ReplyAdded,payload:r})}catch(d){t({type:A.L9.SetAddReplyState,payload:{state:A.c1.Error}})}}},u=async r=>{const s=r.name||e.guestName||p();if(!n||!n.user){if(!s)return i.setTimecodedCommentInProgress(U(U({},r),{},{name:null})),void _(!0);t({type:A.L9.SetGuestName,payload:s}),f(s),i.setTimecodedCommentInProgress(null),_(!1),(0,L.D5)(o)}const c=e.video?.metadata.connections?.notes?.uri;if(null===n||!c)return;t({type:A.L9.SetAddCommentState,payload:A.c1.Requesting});const l={text:r.text,coordinates:(0,b.kG)({x:r.x,y:r.y}),time_code:(0,v.rJ)(r.timecode,1e3),name:s};try{const r=await(async(e,t,n)=>{const{name:o}=e,r=(0,x.Z)(e,E),i=o?e:r,a=JSON.stringify(P(P({},D),i));return await T(a,t,n)})(l,n,c);(0,L.d2)(r,o,e),a(),t({type:A.L9.CommentAdded,payload:r})}catch(d){t({type:A.L9.SetAddCommentState,payload:A.c1.Error})}},g=e=>{t({type:A.L9.RequestSetCommentsVisibility,payload:e})},h=e=>{t({type:A.L9.SetCommentToDelete,payload:e})},O=e=>{t({type:A.L9.SetDeepLinkedCommentId,payload:e})},S=e=>{t({type:A.L9.SetIsAddCommentModalOpen,payload:e})},_=e=>{t({type:A.L9.SetGuestModalVisibility,payload:e})};return U({setCommentText:e=>{t({type:A.L9.SetCommentText,payload:e})},setCommentToDelete:h,setDeepLinkedCommentId:O,fetchComments:a,fetchMoreComments:async function(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"next";if(!e?.comments?.paging?.[o]||!n)return;t({type:A.L9.FetchCommentsInit,payload:!0});const r=await R(`//${n.apiUrl}${e?.comments?.paging?.[o]}`,n);t({type:A.L9.FetchCommentsComplete,payload:{comments:r}})},addComment:async r=>{const i=r||e.guestName||p();if(!n||!n.user){if(!i)return void _(!0);t({type:A.L9.SetGuestName,payload:i}),f(i),_(!1),(0,L.D5)(o)}const s=e.video?.metadata.connections?.notes?.uri;if(null!==n&&s){t({type:A.L9.SetAddCommentState,payload:A.c1.Requesting});try{const r=await k(e.commentText,n,s,i);(0,L.d2)(r,o,e),a(),t({type:A.L9.CommentAdded,payload:r})}catch(c){t({type:A.L9.SetAddCommentState,payload:A.c1.Error})}}},addTimecodedComment:u,onCloseGuestModal:()=>{e.video&&((0,L.AA)(e.video,!1),_(!1))},onCommentSignUp:t=>{let{signup:n}=t;var r,i,a;(0,L.cu)(o,n),e.commentText&&(r=e.commentText,null!==window.localStorage&&window.localStorage.setItem(s,r)),e.stage.commentInProgress&&(i=e.stage.commentInProgress,null!==window.localStorage&&window.localStorage.setItem(c,JSON.stringify(i))),e.replyInProgress&&(a=e.replyInProgress,null!==window.localStorage&&window.localStorage.setItem(l,JSON.stringify(a))),setTimeout((()=>{window.location.reload()}),20)},requestSetCommentsVisibility:g,dismissReviewUpsell:()=>{t({type:A.L9.DismissReviewUpsell,payload:!0})},setIsAddCommentModalOpen:S,selectComment:(e,n)=>{t({type:A.L9.SelectComment,payload:e,meta:{target:n?n.target:null}})},updateAnnotationPosition:async(e,o)=>{if(null!==n)try{const i=await(async(e,t,n,o)=>{const r=JSON.stringify(t);return await I(r,n,e,o)})(e,{coordinates:(0,b.kG)(o)},n,r);t({type:A.L9.CommentUpdated,payload:i})}catch(i){}},addReply:d,updateCommentStatus:async(e,o)=>{const i=e.uri;if(null===n||!i)return;const a=await(async(e,t,n,o)=>{const r=JSON.stringify({status:e});return await I(r,t,n,o)})(o,n,i,r);t({type:A.L9.CommentUpdated,payload:a,meta:{field:"status"}})},handleStashedComments:()=>{const e=(()=>{if(null!==window.localStorage){const e=window.localStorage.getItem(s);return window.localStorage.removeItem(s),e}return null})();e&&(t({type:A.L9.SetCommentText,payload:e}),window.matchMedia(`screen and (max-width: ${(0,y.rem)(C.j$.medium)})`)?S(!0):g(!0));const n=(()=>{if(null!==window.localStorage){const e=window.localStorage.getItem(l);return window.localStorage.removeItem(l),e?JSON.parse(e):null}return null})();n&&d(n.parentComment,n.text),t({type:A.L9.ResetGuestComments,payload:m()});const o=(()=>{if(null!==window.localStorage){const e=window.localStorage.getItem(c);return window.localStorage.removeItem(c),e?JSON.parse(e):null}return null})();o&&u(o)},handleDeepLinkedComment:e=>{const t=new URLSearchParams(e);t.has("comment")&&g(!0);const n=t.get("comment")?.toString();n&&O(n)},requestDeleteComment:()=>{t({type:A.L9.SetDeleteCommentState,payload:{state:A.Rg.Requesting}})},completeDeleteComment:e=>{t({type:A.L9.SetDeleteCommentState,payload:{state:A.Rg.Complete,uri:e}}),h(null),a()},errorDeleteComment:()=>{t({type:A.L9.SetDeleteCommentState,payload:{state:A.Rg.Error}})}},i)};var $=n(96777);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const q=e=>e?e.uris.filter((t=>e.byUri[t].timeCode)).map((t=>{const n=e.byUri[t];return{visible:n.status!==A.t.Closed,timecode:n.timeCode,id:n.uri}})):[],B={[A.L9.CommentAdded]:(e,t)=>F(F({},e),{},{addCommentState:A.c1.Success,commentText:"",isRequestedToShow:!0,isCommentsShowing:!0,guestCommentUris:e.guestName?[...e.guestCommentUris,t.payload.uri]:e.guestCommentUris,activeCommentUri:t.payload.timeCode?t.payload.uri:null}),[A.L9.CommentUpdated]:(e,t)=>{const n=((e,t)=>e.comments?F(F({},e.comments),{},{byUri:F(F({},e.comments.byUri),{},{[t.uri]:t})}):null)(e,t.payload);return F(F({},e),{},{comments:n,stage:"status"===t.meta?.field?F(F({},e.stage),{},{cuePoints:q(n)}):e.stage})},[A.L9.FetchCommentsComplete]:(e,t)=>{const n=((e,t)=>{if(!t)return e.comments;const n=[...t.data];let o;return n.reverse(),e.comments&&1!==t.page?(o=e.comments?.uris,t.page>e.comments.page?o=[...(0,M.xZ)(n),...e.comments.uris]:t.page<e.comments.page&&(o=[...e.comments.uris,...(0,M.xZ)(n)]),F(F({},t),{},{uris:o,byUri:F(F({},e.comments.byUri),(0,M.T2)(n))})):F(F({},t),{},{uris:(0,M.xZ)(n),byUri:(0,M.T2)(n)})})(e,t.payload.comments);return F(F({},e),{},{comments:n,isFetchingComments:!1,stage:F(F({},e.stage),{},{cuePoints:q(n)})})},[A.L9.FetchCommentsInit]:(e,t)=>F(F({},e),{},{isFetchingComments:!0}),[A.L9.ReplyAdded]:(e,t)=>F(F({},e),{},{addReplyState:{state:A.c1.Success},isRequestedToShow:!0,isCommentsShowing:!0,guestCommentUris:e.guestName?[...e.guestCommentUris,t.payload.uri]:e.guestCommentUris}),[A.L9.RequestSetCommentsVisibility]:(e,t)=>F(F({},e),{},{isRequestedToShow:t.payload,isCommentsShowing:e.isGuestModalShowing||t.payload}),[A.L9.ResetGuestComments]:(e,t)=>F(F({},e),{},{guestCommentUris:t.payload}),[A.L9.SelectComment]:(e,t)=>F(F({},e),{},{activeCommentUri:t.payload}),[A.L9.SetAddCommentState]:(e,t)=>F(F({},e),{},{addCommentState:t.payload,isCommentsShowing:e.isGuestModalShowing||e.isRequestedToShow}),[A.L9.SetAddReplyState]:(e,t)=>F(F({},e),{},{addReplyState:t.payload}),[A.L9.SetCommentText]:(e,t)=>F(F({},e),{},{commentText:t.payload}),[A.L9.SetCommentToDelete]:(e,t)=>F(F({},e),{},{commentToDelete:t.payload}),[A.L9.SetDeleteCommentState]:(e,t)=>{if(t.payload.state===A.Rg.Complete)return((e,t)=>{const n=e.comments?.uris.filter((t=>t!==e.deleteCommentState?.uri))??[];return F(F({},e),{},{comments:F(F({},e.comments),{},{total:e.comments?.total||0,uris:n}),deleteCommentState:null})})(e);let n=e.guestCommentUris;return t.payload.uri&&(n=e.guestCommentUris.filter((e=>e!==t.payload.uri))),F(F({},e),{},{deleteCommentState:t.payload,guestCommentUris:n})},[A.L9.SetGuestModalVisibility]:(e,t)=>F(F({},e),{},{isGuestModalShowing:t.payload}),[A.L9.SetGuestName]:(e,t)=>F(F({},e),{},{guestName:t.payload}),[A.L9.SetIsAddCommentModalOpen]:(e,t)=>F(F({},e),{},{isAddCommentModalOpen:t.payload}),[A.L9.SetIsCommentsEnabled]:(e,t)=>F(F({},e),{},{isCommentsEnabled:(0,M.QK)(t.payload)}),[A.L9.SetReplyInProgress]:(e,t)=>F(F({},e),{},{replyInProgress:t.payload}),[A.L9.DismissReviewUpsell]:e=>F(F({},e),{},{reviewUpsellDismissed:!0}),[A.L9.SetVideo]:(e,t)=>F(F({},e),{},{video:t.payload}),[A.L9.SetDeepLinkedCommentId]:(e,t)=>F(F({},e),{},{deepLinkedCommentId:t.payload})},Z=(e,t)=>{const n=$.w2[t.type];if(n)return F(F({},e),{},{stage:n(e.stage,t)});const o=B[t.type];return o?o(e,t):e};var V=n(61250);var G=function(e){let{context:t,videoData:n,children:i}=e;const a=(0,o.useContext)(r.Z),{0:s,1:c}=(0,o.useReducer)(Z,(0,g.Hi)(t,n)),l=z(s,c,a,n),u=(0,o.useRef)(!0);(0,o.useEffect)((()=>{u.current?u.current=!1:(0,L.zI)(s,n,s.isRequestedToShow)}),[s.isCommentsShowing]),(0,o.useEffect)((()=>{n.metadata&&c({type:A.L9.SetIsCommentsEnabled,payload:n})}),[n.metadata,n.user,n.status]);const m=(0,o.useRef)(!0);return(0,o.useEffect)((()=>{var e;m.current?m.current=!1:(e=s.guestCommentUris,null!==window.localStorage&&window.localStorage.setItem(d,JSON.stringify(e)))}),[s.guestCommentUris]),(0,o.useEffect)((()=>{l.handleDeepLinkedComment(window.location.search),l.handleStashedComments()}),[]),(0,V.jsx)(g.A2.Provider,{value:l,children:(0,V.jsx)(g.yC.Provider,{value:s,children:i})})}},29062:function(e,t,n){n.d(t,{DU:function(){return o},EM:function(){return f},FZ:function(){return l},Hu:function(){return m},JF:function(){return c},Qy:function(){return i},Sb:function(){return u},Sw:function(){return p},c9:function(){return d},cu:function(){return a},qi:function(){return r},qq:function(){return s}});const o="ANNOTATION_BEGIN",r="ANNOTATION_CANCEL",i="ANNOTATION_DRAG",a="ANNOTATION_DRAG_START",s="ANNOTATION_DRAG_STOP",c="VIDEO_INIT",l="VIDEO_TIMEUPDATE",d="VIDEO_FULLSCREEN_ENTER",u="VIDEO_FULLSCREEN_EXIT",m="RESET_PLAYER_TIME",p="SET_COMMENT_IN_PROGRESS",f="UPDATE_CUE_POINTS"},96777:function(e,t,n){n.d(t,{Jz:function(){return l},Y6:function(){return s},iT:function(){return c},w2:function(){return d}});var o=n(28744),r=n(29062);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const s={isDragging:!1,paused:!0,duration:0,percent:0,playerTime:null,cuePoints:[],isScrubbing:!1,playerStyles:"",player:null,commentInProgress:null},c=e=>{e.cuePoints.forEach((t=>{try{e.removeCuePoint(t.id)}catch(n){}}))},l=(e,t)=>{e&&(c(e),t.forEach((t=>{try{e.addCuePoint(t.timecode,{visible:t.visible,timecode:t.timecode,id:t.id})}catch(n){}})))},d={[r.JF]:(e,t)=>{let{payload:n,meta:o}=t;return a(a({},e),{},{duration:o.duration,player:n.player})},[r.cu]:e=>a(a({},e),{},{isDragging:!0}),[r.qq]:e=>a(a({},e),{},{isDragging:!1}),[r.FZ]:(e,t)=>{let{payload:n,meta:o}=t;return a(a({},e),{},{playerTime:n,paused:o.paused,percent:o.percent,duration:o.duration})},[r.Hu]:e=>s,[r.Sw]:(e,t)=>{let{payload:n}=t;return a(a({},e),{},{commentInProgress:n})},[r.EM]:(e,t)=>{let{payload:n}=t;return a(a({},e),{},{cuePoints:n})}}},68046:function(e,t,n){n.d(t,{A2:function(){return d},Hi:function(){return s},yC:function(){return l}});var o=n(29901),r=n(96777),i=n(68667),a=n(74076);const s=(e,t)=>({video:t,activeCommentUri:null,comments:null,commentText:"",commentToDelete:null,addCommentState:i.c1.NotRequesting,deleteCommentState:null,isGuestModalShowing:!1,isCommentsShowing:!1,isRequestedToShow:!1,guestName:null,guestCommentUris:[],isCommentsEnabled:(0,a.QK)(t),isAddCommentModalOpen:!1,context:e,isFetchingComments:!1,replyInProgress:null,stage:r.Y6,addReplyState:null,reviewUpsellDismissed:!1}),c={setCommentText:()=>null,setCommentToDelete:e=>null,setDeepLinkedCommentId:e=>null,fetchComments:()=>null,fetchMoreComments:()=>null,addComment:()=>null,addTimecodedComment:e=>null,onCommentSignUp:e=>null,onCloseGuestModal:()=>null,requestSetCommentsVisibility:e=>null,setIsAddCommentModalOpen:e=>null,onAnnotationDrag:e=>null,onAnnotationDragStart:e=>null,onAnnotationDragStop:()=>null,beginAnnotation:e=>null,cancelAnnotation:()=>null,initVideo:e=>null,updateVideoTime:(e,t)=>null,setTimecodedCommentInProgress:e=>null,selectComment:(e,t)=>null,addReply:(e,t,n)=>null,updateCommentStatus:()=>null,updateAnnotationPosition:(e,t)=>null,updateCuePoints:e=>null,requestDeleteComment:()=>null,completeDeleteComment:e=>null,errorDeleteComment:()=>null,dismissReviewUpsell:()=>null},l=(0,o.createContext)(s()),d=(0,o.createContext)(c);l.displayName="ReviewState",d.displayName="ReviewDispatch"},98029:function(e,t,n){n.d(t,{AA:function(){return m},D5:function(){return l},Ro:function(){return g},Sr:function(){return p},Vd:function(){return f},aF:function(){return c},cu:function(){return u},d2:function(){return s},nU:function(){return h},zI:function(){return d}});var o=n(20249),r=n(68667);const i=e=>{const t=e.user.uri.split("/");if(t&&t.length>0){const e=t[t.length-1];return parseInt(e,10)}return null},a=e=>{const t=e?.uri?.split("/");if(t&&t.length>0){const e=t[t.length-1];return parseInt(e,10)}return null},s=(e,t,n)=>{try{o.BigPictureClient.sendEvent(new o.Event("collaboration.comment_on_review_page",2,{product:"Collaboration",owner_id:i(t),video_id:t.id,comment_id:a(e),location:n.context===r.Ux.Manage?"SVV_manage":"SVV_recipient",is_timecoded:e.timeCode>0}))}catch(s){console.warn("Unable to track comment_on_review_page event")}},c=(e,t,n)=>{try{o.BigPictureClient.sendEvent(new o.Event("reply_on_review_page",1,{product:"Workflow",owner_id:i(t),video_id:t.id,comment_id:a(e.metadata.connections.parent),reply_id:a(e)}))}catch(r){console.warn("Unable to track reply_on_review_page event")}},l=e=>{o.BigPictureClient.sendEvent(new o.Event("click_to_comment_as_guest",1,{product:"Collaboration",path:window.location.pathname,location:"Comments Drawer",clip_id:e.id,owner_id:i(e)}))},d=(e,t,n)=>{o.BigPictureClient.sendEvent(new o.Event("collaboration.open_comments_drawer",2,{type:e.isCommentsShowing?"open":"close",product:"Collaboration",path:window.location.pathname,user_initiated:n,location:e.context===r.Ux.Manage?"svv_manage_sidebar":"svv_recipient_sidebar",team_owner_id:t.id,team_subscription_type:t.user?.account,team_size:0}))},u=(e,t)=>{let n=t?"register_to_leave_comment":"log_in_to_leave_comment";o.BigPictureClient.sendEvent(new o.Event(n,1,{product:"Collaboration",path:window.location.pathname,location:"svv",clip_id:e.id,owner_id:i(e)}))},m=(e,t)=>{t||o.BigPictureClient.sendEvent(new o.Event("close_registration_modal",1,{product:"Collaboration",path:window.location.pathname,location:"svv",clip_id:e.id,owner_id:i(e)}))},p=(e,t,n)=>{try{o.BigPictureClient.sendEvent(new o.Event("vimeo.click_on_svv_comment_ellipses_button",1,{product:"Collaboration",path:window.top?.location.pathname,location:n?"svv_recipient":"svv_manage",video_id:e,comment_id:t}))}catch(r){console.warn("Unable to track vimeo.click_on_svv_comment_ellipses_button")}},f=(e,t,n)=>{try{o.BigPictureClient.sendEvent(new o.Event("vimeo.click_on_svv_comment_copy_link",1,{product:"Collaboration",path:window.top?.location.pathname,location:n?"svv_recipient":"svv_manage",video_id:e,comment_id:t}))}catch(r){console.warn("Unable to track vimeo.click_on_svv_comment_copy_link")}},g=(e,t,n)=>{try{o.BigPictureClient.sendEvent(new o.Event("vimeo.click_on_svv_comment_delete",1,{product:"Collaboration",path:window.top?.location.pathname,location:n?"svv_recipient":"svv_manage",video_id:e,comment_id:t}))}catch(r){console.warn("Unable to track vimeo.click_on_svv_comment_delete")}},h=(e,t,n)=>{try{o.BigPictureClient.sendEvent(new o.Event("vimeo.render_deep_linked_comment_on_svv",1,{product:"Collaboration",path:window.top?.location.pathname,location:n?"svv_recipient":"svv_manage",video_id:e,comment_id:t}))}catch(r){console.warn("Unable to track vimeo.render_deep_linked_comment_on_svv")}}},68667:function(e,t,n){let o,r,i,a,s;n.d(t,{L9:function(){return i},Rg:function(){return s},Ux:function(){return o},c1:function(){return a},t:function(){return r}}),function(e){e.Recipient="recipient",e.Manage="manage"}(o||(o={})),function(e){e.Open="open",e.Closed="closed"}(r||(r={})),function(e){e.SetVideo="SET_VIDEO",e.FetchCommentsInit="FETCH_INIT",e.FetchCommentsComplete="FETCH_COMPLETE",e.SetCommentText="SET_COMMENT_TEXT",e.SetAddCommentState="SET_ADD_COMMENT_STATE",e.SetDeleteCommentState="SET_DELETE_COMMENT_STATE",e.SetGuestModalVisibility="SET_GUEST_MODAL_VISIBILITY",e.SetCommentToDelete="SET_COMMENT_TO_DELETE",e.SetGuestName="SET_GUEST_NAME",e.RequestSetCommentsVisibility="REQUEST_SET_COMMENTS_VISIBILITY",e.CommentAdded="CommentAdded",e.SetReviewUpsellShowing="SET_REVIEW_UPSELL_SHOWING",e.SetIsCommentsEnabled="SET_IS_COMMENTS_ENABLED",e.SetIsAddCommentModalOpen="SET_IS_ADD_COMMENT_MODAL_OPEN",e.ResetGuestComments="RESET_GUEST_COMMENTS",e.SelectComment="SELECT_COMMENT",e.SetReplyInProgress="SET_REPLY_IN_PROGRESS",e.SetAddReplyState="SET_ADD_REPLY_STATE",e.ReplyAdded="REPLY_ADDED",e.CommentUpdated="COMMENT_UPDATED",e.UpdateComment="UPDATE_COMMENT",e.SetDeepLinkedCommentId="SET_DEEP_LINKED_COMMENT_ID",e.DismissReviewUpsell="DISMISS_REVIEW_UPSELL"}(i||(i={})),function(e){e[e.Requesting=0]="Requesting",e[e.NotRequesting=1]="NotRequesting",e[e.Error=2]="Error",e[e.Success=3]="Success"}(a||(a={})),function(e){e[e.Requesting=0]="Requesting",e[e.Complete=1]="Complete",e[e.NotRequesting=2]="NotRequesting",e[e.Error=3]="Error"}(s||(s={}))},74076:function(e,t,n){n.d(t,{QK:function(){return y},SI:function(){return p},T2:function(){return s},WR:function(){return f},YI:function(){return g},_T:function(){return m},fG:function(){return h},qi:function(){return b},r$:function(){return l},wd:function(){return w},xZ:function(){return c},yT:function(){return u}});var o=n(28744),r=n(49239);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const s=e=>e.reduce(((e,t)=>a(a({},e),{},{[t.uri]:t})),{}),c=e=>e.map((e=>e.uri)),l=e=>{const t=e.split("/");return t[t.length-1]},d=["coordinates","created_time","metdata","modified_time","resource_key","replies","status","text","text_decorations","time_code","uri","user_name","user.uri","user.pictures"];function u(e,t,n,o){return t&&e?`//${e.apiUrl}${t}?fields=${encodeURIComponent(d.join(","))}&sort=date&direction=desc${n?`&version_uri=${encodeURIComponent(n)}`:""}${o?`&note_id=${o}`:""}`:null}const m=e=>{const t=e?.metadata?.connections?.versions;return t?.currentUri||(p(t)?null:t?.latestIncompleteVersion)},p=e=>!!e?.latestIncompleteVersion?.match(/_replace$/),f=(e,t,n)=>{if(!e||!e.user)return n.some((e=>e===t.uri));const o=t.user?.uri.match(/\/([^\/]*)$/),r=o?parseInt(o[1],10):null;return r&&r&&e?.user?.id===r},g=(e,t)=>t.user&&e?.user?.id===parseInt(t.user&&t.user.uri.split("/")[2],10),h=(e,t,n,o,i)=>{const a=i!==r.I0.Nobody;return e?a&&!!o?.active:n?a&&!!t&&!!o?.active:a},y=e=>!!e&&e.privacy?.comments!==r.I0.Nobody&&!!e?.metadata?.connections?.notes?.uri&&(e.status===r.qb.Available||!p(e.metadata?.connections?.versions)),w=e=>e.textDecorations?.some((e=>!!e.assets?.video)),b=e=>{const t=e.textDecorations?.filter((e=>!!e?.assets?.video));return t&&t.length?t[t.length-1].assets.video:null}},20139:function(e,t,n){n.d(t,{A:function(){return o}});const o=(0,n(29901).createContext)({pauseKeyboardEventListeners:void 0,unpauseKeyboardEventListeners:void 0})},85724:function(e,t,n){n.d(t,{H:function(){return r}});var o=n(29901);function r(e,t){const n=(0,o.useCallback)((()=>{if(e?.user?.id)try{fetch(`//${e.apiUrl}/videos/${t}/last_views?fields=clip_id`,{method:"POST",headers:{Authorization:`jwt ${e.jwt}`,"Content-Type":"application/json"},body:JSON.stringify({user_id:e.user.id}),keepalive:!0})}catch(n){console.warn(n)}}),[e?.user?.id]);(0,o.useEffect)((()=>(window.addEventListener("unload",n),()=>{window.removeEventListener("unload",n)})),[e?.user?.id])}},70435:function(e,t,n){n.d(t,{h:function(){return i}});var o=n(29901),r=n(34872);function i(e,t){const[{post:n}]=(0,r.D)(`/videos/${t}/last_views?fields=clip_id`);(0,o.useEffect)((()=>{if(e&&n({variables:{user_id:e.user?.id??null}}),e?.user?.id){const t=setInterval((()=>{n({variables:{user_id:e.user?.id}})}),3e5);return()=>clearInterval(t)}}),[e?.user?.id])}},68664:function(e,t,n){n.d(t,{Z:function(){return o}});const o=e=>({video_privacy:e?.privacy?.view||null,video_app_id:e?.app?.uri||null,is_video_password_protected:!!e?.password,video_embed_privacy:e?.privacy?.embed||null,team_owner_id:e?.user?.uri?e.user?.uri.split("/")[2]:null,team_subscription_type:e?.user?.account||null})},1153:function(e,t,n){n.d(t,{o:function(){return d}});var o=n(22839),r=(n(29901),n(53897)),i=n(54694),a=n(28744),s=n(61250);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const d=e=>{let{onClick:t}=e;return(0,s.jsx)(m,{format:"secondary",variant:"minimal",onClick:t,icon:(0,s.jsx)(u,{})})},u=(0,r.default)((function(e){return(0,s.jsx)("svg",l(l({},e),{},{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{className:"cc-icon-border",fillRule:"evenodd",clipRule:"evenodd",d:"M1 18.3C1 19.7912 2.20883 21 3.7 21H18.3C19.7912 21 21 19.7912 21 18.3V3.7C21 2.20883 19.7912 1 18.3 1H3.7C2.20883 1 1 2.20883 1 3.7V18.3Z",strokeWidth:"1.8"}),(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.4635 12.1555C10.3319 12.9875 9.99224 13.6741 9.45588 14.1991C8.91022 14.7304 8.20508 15 7.36121 15C6.32209 15 5.49037 14.638 4.89036 13.9232C4.29893 13.2161 4 12.243 4 11.0272C4 9.71395 4.3397 8.68369 5.00908 7.96181C5.60265 7.3239 6.36643 7 7.27968 7C8.494 7 9.39938 7.43539 9.97079 8.29346C10.2804 8.77049 10.4507 9.2588 10.4757 9.74358L10.4864 9.9574H10.2697H8.8337H8.67494L8.63417 9.80639C8.5505 9.48531 8.44609 9.24469 8.32165 9.09085C8.10282 8.822 7.78314 8.69145 7.33904 8.69145C6.8985 8.69145 6.55738 8.87986 6.29921 9.26868C6.02674 9.67866 5.88871 10.2771 5.88871 11.0505C5.88871 11.8175 6.03174 12.3926 6.31351 12.7595C6.5867 13.1159 6.9221 13.2895 7.33832 13.2895C7.7667 13.2895 8.08208 13.1455 8.30377 12.847C8.42964 12.6826 8.53691 12.4222 8.62416 12.0758L8.66135 11.9226H8.82369H10.2597H10.5L10.4635 12.1555Z"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.9635 12.1555C17.8319 12.9875 17.4922 13.6741 16.9559 14.1991C16.4102 14.7304 15.7051 15 14.8612 15C13.8221 15 12.9904 14.638 12.3904 13.9232C11.7989 13.2161 11.5 12.243 11.5 11.0272C11.5 9.71395 11.8397 8.68369 12.5091 7.96181C13.1027 7.3239 13.8664 7 14.7797 7C15.994 7 16.8994 7.43539 17.4708 8.29346C17.7804 8.77049 17.9507 9.2588 17.9757 9.74358L17.9864 9.9574H17.7697H16.3337H16.1749L16.1342 9.80639C16.0505 9.48531 15.9461 9.24469 15.8217 9.09085C15.6028 8.822 15.2831 8.69145 14.839 8.69145C14.3985 8.69145 14.0574 8.87986 13.7992 9.26868C13.5267 9.67866 13.3887 10.2771 13.3887 11.0505C13.3887 11.8175 13.5317 12.3926 13.8135 12.7595C14.0867 13.1159 14.4221 13.2895 14.8383 13.2895C15.2667 13.2895 15.5821 13.1455 15.8038 12.847C15.9296 12.6826 16.0369 12.4222 16.1242 12.0758L16.1613 11.9226H16.3237H17.7597H18L17.9635 12.1555Z"})]})]})}))})).withConfig({componentId:"sc-1lk919f-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.additions.content.color4})),m=(0,r.default)(i.z).withConfig({componentId:"sc-1lk919f-1"})(["color:",";svg{.cc-icon-border{fill:none;stroke:",";}}&:hover svg,&:focus svg{> *{fill:",";}g{.cc-icon-border{stroke:",";}g{path{fill:",";}}}}"],(e=>{let{theme:t}=e;return t.additions.content.color4}),(e=>{let{theme:t}=e;return t.additions.content.color4}),(e=>{let{theme:t}=e;return(0,o.tint)(.15,t.formats.secondary)}),(e=>{let{theme:t}=e;return t.content.color2}),(e=>{let{theme:t}=e;return t.content.color2}))},50184:function(e,t,n){n.d(t,{C:function(){return f}});var o=n(28744),r=n(31076),i=n(83617),a=n(22839),s=(n(29901),n(53897)),c=n(4432),l=n(61250);const d=["children","className"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const p={initial:{x:"100%"},enter:{x:"0"},exit:{x:"100%"}},f=e=>{let{children:t,className:n}=e,o=(0,r.Z)(e,d);return(0,l.jsx)(g,m(m({animate:"enter",className:n,exit:"exit",initial:"initial",transition:{bounceStiffness:50,duration:.2},variants:m(m({},p),o?.variants)},o),{},{children:t}))},g=(0,s.default)(i.E.div).withConfig({componentId:"sc-19ix4ro-0"})(["width:",";min-height:100vh;height:100%;position:absolute;top:0;right:0;@media screen and (max-width:","){position:fixed;z-index:",";}"],(0,a.rem)(340),(0,a.rem)(c.j$.medium),c.vn)},29649:function(e,t,n){n.d(t,{z:function(){return i}});n(29901);var o=n(83617),r=n(61250);const i=()=>(0,r.jsx)(o.E.div,{animate:{width:340},"aria-hidden":!0,exit:{width:0},initial:{width:0},layout:!0,transition:{type:"keyframes",duration:.18,ease:"easeInOut"}})},40001:function(e,t,n){n.d(t,{O:function(){return g}});var o=n(35118),r=n(29901),i=n(51658),a=n(80746),s=n(71036),c=n(93871),l=n(8467),d=n(53040),u=n(61250);const m=(0,r.forwardRef)(((e,t)=>{let{active:n,items:o,onClick:r,page:s}=e;return(0,u.jsx)(d.v$,{active:n,content:(0,u.jsx)("div",{ref:t,children:o.map(((e,t)=>{let{name:n,link:o}=e;return(0,u.jsx)(d.HC,{children:(0,u.jsx)(a.r,{onClick:()=>(0,c.r8)(s),target:"_self",variant:"minimal",href:o,children:(0,u.jsx)(i.X.Item,{children:n})})},t)}))}),children:(0,u.jsx)(d.dc,{isPopOverOpen:n,onClick:r,children:(0,u.jsx)(d.RO,{"data-testid":"folder-icon"})})})})),p=e=>{let{pathItems:t,page:n}=e;return(0,u.jsx)(u.Fragment,{children:t.map(((e,t)=>{let{link:o,name:r}=e;return(0,u.jsx)(d.f$,{children:(0,u.jsx)(d.y$.Link,{href:o,onClick:()=>(0,c.r8)(n),children:(0,u.jsx)(d.CQ,{children:r})})},t)}))})},f=e=>{let{ancestorPath:t,currentItemName:n,page:o}=e;const{0:i,1:a}=(0,r.useState)(!1),c=(0,r.useRef)(null),f=(0,l.d)(),g=f?1:2,h=t.slice(0,g).reverse(),y=t.slice(g,t.length).reverse();(0,s.O)([c],(()=>{i&&a(!1)}));const w=t.length>2||f&&t.length>1;return(0,u.jsx)(u.Fragment,{children:w?(0,u.jsxs)(d.y$,{"data-testid":"breadcrumbs-path",children:[(0,u.jsx)(d.iF,{children:(0,u.jsx)(d.y$.Link,{tabIndex:-1,href:"#",children:(0,u.jsx)(m,{page:o,items:y,active:i,ref:c,onClick:()=>a((e=>!e))})})}),(0,u.jsx)(p,{page:o,pathItems:h}),(0,u.jsx)(d.P_,{children:n})]}):(0,u.jsxs)(d.y$,{"data-testid":"breadcrumbs-path",children:[(0,u.jsx)(p,{page:o,pathItems:h}),(0,u.jsx)(d.P_,{children:n})]})})},g=e=>{let{currentItemName:t,videoId:n,page:r,shouldShowBreadcrumbs:i}=e;const{data:a}=(0,o.rw)({where:{videoId:n},select:["metadata.connections.ancestorPath.link","metadata.connections.ancestorPath.name"]});return i?a?a?.metadata?.connections?.ancestorPath?.length?(0,u.jsx)(d.MH,{children:(0,u.jsx)(f,{page:r,currentItemName:t,ancestorPath:a.metadata.connections.ancestorPath})}):(0,u.jsx)(d.MH,{}):(0,u.jsx)(d.MH,{children:(0,u.jsx)(d.Bw,{})}):(0,u.jsx)(d.MH,{})}},53040:function(e,t,n){n.d(t,{Bw:function(){return C},CQ:function(){return y},HC:function(){return v},MH:function(){return u},P_:function(){return h},RO:function(){return m},dc:function(){return p},f$:function(){return w},iF:function(){return b},v$:function(){return g},y$:function(){return f}});var o=n(22839),r=n(53897),i=n(38493),a=n(55107),s=n(92148),c=n(28230),l=n(20326),d=n(4432);const u=r.default.div.withConfig({componentId:"sc-1afpg54-0"})(["align-items:center;margin-left:",";width:",";height:",";max-width:90vw;display:flex;padding:"," 0;"],(0,o.rem)(6),(0,o.rem)(500),(0,o.rem)(60),(0,o.rem)(20)),m=(0,r.default)(s.g).withConfig({componentId:"sc-1afpg54-1"})(["path{fill:",";}"],l.v.color.text(700)),p=r.default.button.withConfig({componentId:"sc-1afpg54-2"})(["width:",";height:",";padding:",";border-radius:",";margin-right:",";border:none;background:",";","{path{fill:",";}}",""],(0,o.rem)(32),(0,o.rem)(32),(0,o.rem)(7),(0,o.rem)(6),(0,o.rem)(16),l.v.color.surface.tertiary,m,l.v.color.text(0),(e=>{let{isPopOverOpen:t}=e;return!t&&(0,r.css)([":not(:hover){background:none;"," path{fill:",";}}"],m,l.v.color.text(700))})),f=(0,r.default)(a.y).withConfig({componentId:"sc-1afpg54-3"})(["max-width:",";height:",";display:inline-grid;grid-template-columns:auto repeat(2,minmax(",",min-content)) auto;margin-left:",";a{display:flex;padding:0 ",";color:",";width:100%;}a:hover{color:",";}path{fill:",";}@media screen and (max-width:","){> a{display:none !important;}}"],(0,o.rem)(500),(0,o.rem)(60),(0,o.rem)(40),(0,o.rem)(8),(0,o.rem)(6),l.v.color.text(700),l.v.color.text(0),l.v.color.text(700),(0,o.rem)(d.j$.mediumLarge)),g=(0,r.default)(c.v).withConfig({componentId:"sc-1afpg54-4"})(["margin:0;background:",";left:-2.4rem;position:absolute;span{font-size:",";}"],l.v.color.surface.tertiary,(0,o.rem)(14)),h=(0,r.default)(f.Current).withConfig({componentId:"sc-1afpg54-5"})(["overflow:visible;color:",";"],l.v.color.text(0)),y=r.default.div.withConfig({componentId:"sc-1afpg54-6"})(["text-overflow:ellipsis;overflow:hidden;white-space:nowrap;width:100%;"]),w=r.default.div.withConfig({componentId:"sc-1afpg54-7"})(["display:flex;padding-right:",";position:relative;svg{position:absolute;display:block;}"],(0,o.rem)(24)),b=r.default.div.withConfig({componentId:"sc-1afpg54-8"})(["display:flex;align-items:center;position:relative;> svg{position:absolute;display:block;}"]),v=r.default.div.withConfig({componentId:"sc-1afpg54-9"})(["span{display:inline-block;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%;}"]),C=(0,r.default)(i.B).withConfig({componentId:"sc-1afpg54-10"})(["height:",";left:",";width:",";max-width:91vw;"],(0,o.rem)(35),(0,o.rem)(12),(0,o.rem)(500))},59586:function(e,t,n){n.d(t,{j:function(){return d}});n(29901);var o=n(63504),r=n(22839),i=n(53897),a=n(20326),s=n(77401);const c=i.default.div.withConfig({componentId:"iy9iwc-0"})([""," display:flex;flex-direction:column;align-items:center;justify-content:center;margin:auto;& svg{margin-right:",";margin-left:",";}> span{line-height:1;font-size:","px;border:thin solid ",";border-radius:10px;padding:3px;background-color:",";color:",";margin-left:-5px;margin-top:3px;}"],(e=>{let{theme:t}=e;return`color: ${t.additions.content.color3};`}),(0,r.rem)(4),(0,r.rem)(-6),a.v.typography.size(100),(e=>{let{theme:t}=e;return t.icons.contentColor0}),(e=>{let{theme:t}=e;return t.icons.contentColor0}),(e=>{let{theme:t}=e;return(0,s.tx)(t,a.v.color.text.primary)}));var l=n(61250);const d=e=>{let{locale:t="en-US",numberOfComments:n}=e;if("undefined"!==typeof n){const e=new Intl.NumberFormat(t,{notation:"compact",compactDisplay:"short"}).format(n);return(0,l.jsxs)(c,{children:[(0,l.jsx)(o.u,{}),(0,l.jsx)("span",{children:e})]})}return(0,l.jsx)(o.u,{})}},42550:function(e,t,n){n.d(t,{S:function(){return i}});n(29901);var o=n(96136),r=n(61250);const i=e=>{let{thumbs:t}=e;return(0,r.jsx)(o.mI,{videoDimensions:{height:9,width:16},children:(0,r.jsx)(o.Qc,{children:(0,r.jsx)(o.Nh,{scaleup:!1,children:(0,r.jsx)(o.J5,{thumb:t?.baseLink})})})})}},96136:function(e,t,n){n.d(t,{J5:function(){return p},Nh:function(){return m},Qc:function(){return a},Zl:function(){return d},mI:function(){return u},xm:function(){return l}});var o=n(22839),r=n(53897),i=n(39064);const a=r.default.div.withConfig({componentId:"r02w9v-0"})(["border:",";"],(e=>{let{theme:t}=e;return`${(0,o.rem)(1)} solid ${t.additions.content.border3}`})),s=r.default.div.withConfig({componentId:"r02w9v-1"})(["z-index:",";transition:transform 300ms;transform-origin:top;",";"],(e=>{let{isCommentsShowing:t}=e;return t?"auto":2}),(e=>{let{scaleup:t}=e;return t&&"transform: scale(1.05)"})),c=r.default.div.withConfig({componentId:"r02w9v-2"})(["",";"],(e=>{let{videoDimensions:t}=e;const n=t.height/t.width;return`\n      min-width: ${(0,o.rem)(240)};\n      max-width: calc(50vh / ${n});\n      margin: 0 auto;\n      width: 100%;\n\n      @media screen and (min-width: ${(0,o.rem)(769)}) {\n        width: calc((100vh - ${(0,o.rem)(264)}) / ${n});\n        max-width: 100%;\n        padding-top: ${(0,o.rem)(8)};\n      }\n\n      ${m} {\n        position: relative;\n        background-color: black;\n        > div {\n          position: absolute;\n        }\n        height: 0;\n        width: 100%;\n        padding-bottom: ${100*n}%;\n      }\n    `})),l=(0,r.default)(c).withConfig({componentId:"r02w9v-3"})(["padding-top:0;z-index:",";opacity:",";transition:opacity 500ms,z-index 50ms 500ms;"],(e=>{let{isHidden:t}=e;return t?-1:5}),(e=>{let{isHidden:t}=e;return t?0:1})),d=r.default.div.withConfig({componentId:"r02w9v-4"})(["display:flex;align-items:center;justify-content:center;background:url(",");background-size:cover;width:100%;height:100%;"],(e=>{let{url:t}=e;return t})),u=(0,r.default)(c).withConfig({componentId:"r02w9v-5"})(["background-color:",";border-radius:",";padding-top:0;"],(e=>{let{theme:t}=e;return t.background}),(0,o.rem)(8)),m=(0,r.default)(s).withConfig({componentId:"r02w9v-6"})(["background-color:transparent !important;border-radius:",";"],(0,o.rem)(8)),p=(0,r.default)(i.O).withConfig({componentId:"r02w9v-7"})(["height:100%;width:100%;border-radius:",";background-image:url('","');background-size:cover;"],(0,o.rem)(8),(e=>e.thumb))},39064:function(e,t,n){n.d(t,{O:function(){return p}});var o=n(28744),r=(n(29901),n(53897)),i=n(19405);const a=(0,r.keyframes)(["0%{background-position:-100% 0;}100%{background-position:100% 0;}"]),s=(0,r.css)(["background:linear-gradient(290deg,"," 10%,"," 50%,"," 90%);background-size:200%;"],(0,i.ae)(50),(0,i.ae)(10),(0,i.ae)(50)),c=(0,r.css)(["background:linear-gradient( 290deg,"," 10%,"," 50%,"," 90% );background-size:200%;"],(0,i.se)(800),(0,i.se)(750),(0,i.se)(800)),l=(0,r.css)([""," animation:"," 3s linear infinite;"],(e=>{let{theme:t}=e;return"dark"===t.name?c:s}),a),d=r.default.div.withConfig({componentId:"sc-1doazd1-0"})(["",";"],l);var u=n(61250);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}const p=e=>(0,u.jsx)(d,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},44351:function(e,t,n){n.d(t,{Z:function(){return a}});var o=n(29901),r=n(10691),i=n(67059);function a(e,t,n,a){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"540p",l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;const{PlayerConstructor:d,playerType:u}=(0,o.useContext)(r.E),{0:m,1:p}=(0,o.useState)(!1),{0:f,1:g}=(0,o.useState)(null),h=()=>{p(!0);new d(e.current,a).then((e=>{e.loop=s,e.quality=c,e.volume=l,g(e),p(!1)})).catch((()=>p(!1)))},y=()=>{if(p(!0),u===i.G.BarebonePlayer)h();else{const t=new d(e.current,a,!0,{});g(t),p(!1)}},w=async()=>{await(f?.unload()),g(null)};return(0,o.useEffect)((()=>{f&&f.videoId===Number(t)||d&&n&&e.current&&t&&a&&!m&&(e.current.innerHTML="",y())}),[d,f?.videoId,m,e,t,a,n,s,c]),{player:f,flushPlayer:w}}}}]);